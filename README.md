
# 📘 הנחיות פיתוח – מערכת ניהול AllForYou

מערכת זו מיועדת לניהול עסקים, עובדים, משמרות, טוקנים, מסמכים ועוד – עם הפרדה ברורה בין סוגי משתמשים והרשאות, ללא נתוני דמה.

---

## 🔐 סוגי משתמשים והרשאות

| סוג משתמש       | גישה                                  |
|------------------|-----------------------------------------|
| `super_admin`     | ניהול כל העסקים, אינטגרציות, הרשאות, דוחות |
| `business_admin`  | ניהול עובדים, משמרות, מסמכים, טוקנים בעסק שלו |
| `business_user`   | צפייה באזור האישי, הגשת משמרות, צפייה במסמכים בלבד |

> כל רכיב או מסך חייב לכלול הגנה (`ProtectedRoute` / בדיקת תפקיד ב־`AuthContext`).

---

## 📁 מבנה תיקיות בפרויקט

```
src/
│
├── components/
│   ├── superadmin/        # רכיבים לסופר־אדמין
│   ├── business/          # רכיבים למנהלי עסקים ועובדים
│   ├── shared/            # רכיבים כלליים
│
├── pages/
│   ├── superadmin/        # דפים לסופר־אדמין (ניהול עסקים, אינטגרציות)
│   ├── business/          # דפים למנהל עסק (עובדים, משמרות)
│   ├── auth/              # התחברות והרשמה
│
├── hooks/                 # שימושי דאטה ושאילתות (Supabase)
├── lib/                   # קוד עזר, ניהול טוקנים ופורמטים
├── types/                 # טיפוסים עבור טבלאות המערכת
└── constants/             # קבועים וסוגי תפקידים
```

---

## ✅ כללי כתיבה אחידים

- ✅ שימוש ב-TypeScript עם טיפוסים מלאים – אין להשתמש ב-`any`
- ✅ רכיבים פונקציונליים בלבד (`React.FC`)
- ✅ שימוש ב־Tailwind בלבד לעיצוב
- ✅ אין לשלוף נתוני דמה (`mock data`) – הכל מחובר ל־Supabase אמיתי
- ✅ שאילתות עם `select` מפורש בלבד – לא להשתמש ב־`select('*')`

---

## 🧠 דוגמה לבדיקת הרשאות

```tsx
import { useAuth } from '@/context/AuthContext';

const { user } = useAuth();

if (user?.role !== 'super_admin') {
  return <Unauthorized />;
}
```

---

## 🛑 טעויות נפוצות להימנע מהן

- ⛔ שימוש בשם טבלה לא קיים או ללא קשרים (foreign key)
- ⛔ כתיבה לא טיפוסית של שאילתות
- ⛔ ניהול לא נכון של AuthContext
- ⛔ שימוש ברכיבים לא מופרדים לפי הרשאה

---

## 🧾 עקרונות פיתוח כלליים

- כל מודול חדש חייב ראוט ייעודי עם בדיקת הרשאות
- Sidebar אחיד עם ניווט לפי סוג המשתמש
- ניהול טוקנים, משמרות, מסמכים – לפי העדפות והעסק המשויך
- כל שליחה אוטומטית (למשל וואטסאפ) – מחייבת תיעוד בלוג

---

## 🎯 מטרת המערכת

מערכת זו מאפשרת לעסקים לנהל עובדים, לקבוע משמרות, לשלוח טוקנים למילוי זמנים, ולעקוב אחר נתוני נוכחות – כל זאת עם הפרדה ברורה בין משתמשים ובקרת גישה הדוקה.

---

## 🔧 טכנולוגיות בשימוש

- **Frontend**: React + TypeScript + Tailwind CSS
- **Backend**: Supabase (PostgreSQL + Auth + Edge Functions)
- **State Management**: React Query (TanStack Query)
- **UI Components**: shadcn/ui
- **Routing**: React Router DOM

---

## 📝 הערות חשובות

1. המערכת מיועדת להפרדה מוחלטת בין עסקים שונים
2. כל נתון חייב להיות מקושר לעסק ספציפי או למשתמש מורשה
3. אין להשתמש בנתוני דמה במודולים הפרודוקטיביים
4. כל פעולה רגישה חייבת להיות מתועדת ברמת הלוג

---

## ⚡ להתחלה מהירה

```bash
# התקנת תלויות
npm install

# הפעלת סביבת הפיתוח
npm run dev

# בנייה לפרודוקשן
npm run build
```

---

**נבנה עם ❤️ למערכות ניהול עסקי מתקדמות**
